(window["webpackJsonpdeploy-dashboard"]=window["webpackJsonpdeploy-dashboard"]||[]).push([[0],{25:function(e,n,t){e.exports=t(41)},30:function(e,n,t){},33:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(14),o=t.n(c),i=(t(30),t(15)),u=t(4),s=t.n(u),l=t(7),p=t(16),f=t(17),m=t(23),v=t(18),b=t(24);t(32),t(33);function h(e){return"".concat(e.stage,"-").concat(e.env.name,"-").concat(e.component.urlPart,".").concat(e.env.domain)}var d,g={prod:{name:"prod",domain:"traceair.net"},prud:{name:"prud",domain:"traceair.ru"},che:{name:"che",domain:"traceair.ru"}};!function(e){e.blue="blue",e.green="green"}(d||(d={}));var O={FO:{title:"Frontoffice",urlPart:"fo"},CSU:{title:"CSU",urlPart:"csu"},Storage:{title:"FOStorage",urlPart:"fo-storage"},Printing:{title:"Printing",urlPart:"printing"}},y=[{component:O.FO,env:g.prod,url:"office.traceair.net"},{component:O.FO,env:g.prud,url:"office.traceair.ru"},{component:O.FO,env:g.che,url:"my.traceair.ru"},{component:O.CSU,env:g.prod,url:"csu-api.traceair.net"},{component:O.CSU,env:g.prud,url:"csu-api.traceair.ru"},{component:O.CSU,env:g.che,url:"csu-api-my.traceair.ru"},{component:O.Storage,env:g.prod,url:"fo-storage.traceair.net"},{component:O.Storage,env:g.prud,url:"fo-storage.traceair.ru"},{component:O.Storage,env:g.che,url:"fo-storage-my.traceair.ru"},{component:O.Printing,env:g.prod,url:"printing.traceair.net"},{component:O.Printing,env:g.prud,url:"printing.traceair.ru"},{component:O.Printing,env:g.che,url:"printing-my.traceair.ru"}],w="http://api.ipstack.com/",j="91318f82b6dfb8201157e3f8c7fd29f0";function P(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch((r=n,"".concat(w,"/").concat(r,"?access_key=").concat(j))).then((function(e){return e.json()}));case 3:return t=e.sent,e.abrupt("return",t.ip);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("APIStack request failed: ".concat(e.t0)),e.t0;case 11:case"end":return e.stop()}var r}),e,null,[[0,7]])})))).apply(this,arguments)}var k=t(8),x=t(10),S=t.n(x),F=t(19),C=t.n(F),U=function(e){var n=e.balancer,t=e.instances,a=t.find((function(e){return e.ip===n.ip&&null!==e.ip}));return r.createElement(S.a,{className:B},r.createElement(S.a.Header,null,n.component.title,r.createElement(C.a,{variant:D(a)},n.ip)),r.createElement(S.a.Body,null,h(t[0]),r.createElement("br",null),h(t[1])))},B=Object(k.a)({marginBottom:"8px",$nest:{"&:hover":{transition:"ease-in",boxShadow:"0 5px 5px 0px rgba(0, 0, 0, 0.2)"}}}),D=function(e){return e?e.stage===d.blue?"primary":"success":"light"},N=t(20),A=t.n(N),I=function(e){var n=e.env,t=e.instances,a=e.balancers,c=e.components;return r.createElement(A.a,{className:J},r.createElement("h1",{className:W},n.name),c.map((function(e){var c=t.filter((function(n){return n.component===e})),o=a.find((function(n){return n.component===e}));if(!o)throw new Error("Balancer not found for component ".concat(e," in ").concat(n.name));return r.createElement(r.Fragment,{key:e.urlPart},r.createElement(U,{instances:c,balancer:o}))})))},J=Object(k.a)({}),W=Object(k.a)({textAlign:"center"}),$=t(21),q=t.n($),H=t(22),M=t.n(H);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var z=function(e){function n(e){var t;return Object(p.a)(this,n),(t=Object(m.a)(this,Object(v.a)(n).call(this,e))).state={environments:g,instances:G(),balancers:y},t}return Object(b.a)(n,e),Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.state.instances.map((function(e){return K(e)})));case 2:return e.next=4,Promise.all(this.state.balancers.map((function(e){return K(e)})));case 4:this.forceUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,n=e.instances,t=e.balancers,r=e.environments;return a.a.createElement(q.a,null,a.a.createElement(M.a,null,Object.values(r).map((function(e){var r=n.filter((function(n){return n.env===e})),c=t.filter((function(n){return n.env===e}));return a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement(I,{env:e,instances:r,balancers:c,components:Object.values(O)}))}))))}}]),n}(a.a.Component);function G(){var e=[];return Object.keys(g).forEach((function(n){var t=g[n];Object.keys(d).forEach((function(n){var r=d[n];Object.keys(O).forEach((function(n){var a={component:O[n],env:t,stage:r,ip:null,url:""};e.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(t,!0).forEach((function(n){Object(i.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},a,{url:h(a)}))}))}))})),e}function K(e){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.url,e.prev=1,e.next=4,P(t);case 4:r=e.sent,n.ip=r,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),n.ip=null;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.635f875a.chunk.js.map